-- jobs table
CREATE TABLE jobs (
    id UUID PRIMARY KEY,
    command TEXT NOT NULL,
    type TEXT CHECK (type IN ('script', 'command')) NOT NULL,
    priority INTEGER DEFAULT 0,
    timeout INTEGER,
    status TEXT DEFAULT 'queued' CHECK (status IN ('queued', 'running', 'completed', 'failed', 'cancelled')),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- job_logs table
CREATE TABLE job_logs (
    id UUID PRIMARY KEY,
    job_id UUID REFERENCES jobs(id),
    log TEXT NOT NULL,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- job_outputs table
CREATE TABLE job_outputs (
    id UUID PRIMARY KEY,
    job_id UUID REFERENCES jobs(id),
    output TEXT,
    success BOOLEAN,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
